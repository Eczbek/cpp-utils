#pragma once

#include <optional>
#include <vector>


namespace gcufl {
	namespace geom {
		struct Point {
			double x;
			double y;

			Point(const double x = 0, const double y = 0) noexcept;

			bool operator==(const gcufl::geom::Point other) const noexcept;

			bool operator!=(const gcufl::geom::Point other) const noexcept;

			gcufl::geom::Point rotate(const double angle, const gcufl::geom::Point pivot = gcufl::geom::Point(0, 0)) const noexcept;
		};

		struct Line {
			gcufl::geom::Point start;
			gcufl::geom::Point end;

			Line(const gcufl::geom::Point intersection1, const gcufl::geom::Point intersection2) noexcept;

			Line(const gcufl::geom::Point intersection, const double angle) noexcept;

			bool operator==(const gcufl::geom::Line& other) const noexcept;

			bool operator!=(const gcufl::geom::Line& other) const noexcept;

			double slope() const noexcept;

			double interceptX() const noexcept;

			double interceptY() const noexcept;

			double angle() const noexcept;

			std::optional<gcufl::geom::Point> intersection(const gcufl::geom::Line& other) const noexcept;

			double length() const noexcept;

			virtual bool contains(const gcufl::geom::Point point) const noexcept;

			gcufl::geom::Line rotate(const double angle, const gcufl::geom::Point pivot = gcufl::geom::Point(0, 0));
		};

		struct Ray: gcufl::geom::Line {
			Ray(const gcufl::geom::Point start, const gcufl::geom::Point intersection) noexcept;

			Ray(const gcufl::geom::Point start, const double angle) noexcept;

			bool operator==(const gcufl::geom::Ray& other) const noexcept;

			bool operator!=(const gcufl::geom::Ray& other) const noexcept;

			bool contains(const gcufl::geom::Point point) const noexcept;
		};

		struct Segment: gcufl::geom::Line {
			Segment(const gcufl::geom::Point start, const gcufl::geom::Point end) noexcept;

			bool operator==(const gcufl::geom::Segment& other) const noexcept;

			bool operator!=(const gcufl::geom::Segment& other) const noexcept;

			double length() const noexcept;

			bool contains(const gcufl::geom::Point point) const noexcept;
		};

		struct Polygon {
			std::vector<gcufl::geom::Point> points;

			Polygon(const std::vector<gcufl::geom::Point>& points) noexcept;

			bool operator==(const gcufl::geom::Polygon& other) const noexcept;

			bool operator!=(const gcufl::geom::Polygon& other) const noexcept;

			double area() const noexcept;

			double perimeter() const noexcept;

			std::vector<gcufl::geom::Segment> sides() const noexcept;

			bool contains(const gcufl::geom::Point point) const noexcept;

			gcufl::geom::Polygon rotate(const double angle, const gcufl::geom::Point pivot) const noexcept;
		};

		struct Ellipse {
			gcufl::geom::Point center;
			gcufl::geom::Point radius;
			double rotation;

			Ellipse(const gcufl::geom::Point center, const gcufl::geom::Point radius, const double rotation = 0) noexcept;

			bool operator==(const gcufl::geom::Ellipse& other) const noexcept;

			bool operator!=(const gcufl::geom::Ellipse& other) const noexcept;

			double area() const noexcept;

			double perimiter() const noexcept;

			bool contains(const gcufl::geom::Point point) const noexcept;

			std::vector<gcufl::geom::Point> intersections(const gcufl::geom::Line& line) const noexcept;

			std::vector<gcufl::geom::Point> intersections(const gcufl::geom::Ellipse& other) const noexcept;

			gcufl::geom::Ellipse rotate(const double angle, const gcufl::geom::Point pivot) const noexcept;

			gcufl::geom::Polygon boundingBox() const noexcept;
		};

		struct Circle: gcufl::geom::Ellipse {
			Circle(const gcufl::geom::Point center, const double radius) noexcept;

			bool operator==(const gcufl::geom::Circle& other) const noexcept;

			bool operator!=(const gcufl::geom::Circle& other) const noexcept;

			bool contains(const gcufl::geom::Point point) const noexcept;

			gcufl::geom::Circle rotate(const double angle, const gcufl::geom::Point pivot) const noexcept;
		};
	}
}
